## This is a C++11 package
CXX_STD = CXX11


magellan_all: liblandscape.a fl_statistics fl_generate



# fl_stats:
# 	echo "make fl_statistics in MAGELLAN/ ..."
# 	(cd MAGELLAN; $(MAKE) fl_statistics)

# fl_gen:
# 	echo "make fl_generate in MAGELLAN/ ..."
# 	(cd MAGELLAN; $(MAKE) fl_generate)

# liblandscape:
# 	echo "make liblandscape in MAGELLAN/ ..."
# 	(cd MAGELLAN; $(MAKE) liblandscape.a)

# magellanall:
# 	echo "make all MAGELLAN in MAGELLAN/ ..."
# 	(cd MAGELLAN; $(MAKE) magellanall)
# clean:
# 	echo "mak clean in MAGELLAN/ ..."
# 	(cd MAGELLAN; $(MAKE) clean)


MAGELLAN_SRC = MAGELLAN/gamma.c\
       MAGELLAN/landscape.c \
       MAGELLAN/random.c\
       MAGELLAN/sort.c\
       MAGELLAN/chain.c\
       MAGELLAN/input.c\
       MAGELLAN/common_drawings.c\
       MAGELLAN/genotypes.c\
       MAGELLAN/ordered_pairs.c\
       MAGELLAN/calculus.c\
       MAGELLAN/vector.c\
       MAGELLAN/generalized_chain.c\
       MAGELLAN/LinearAlgebra.c\
       MAGELLAN/summary_statistics.c\
       MAGELLAN/epistasis_type.c\
       MAGELLAN/decomposition.c\
       MAGELLAN/models.c
MAGELLAN_OBJECTS = $(MAGELLAN_SRC:.c=.o)

liblandscape.a: $(MAGELLAN_OBJECTS)
	$(AR) -r $@ $+ ;
	$(RANLIB) $@;



MAGELLAN_LIBS = liblandscape.a
MAGELLAN_LIBS_DIR = -L.
MAGELLAN_LFLAGS = -llandscape
MAGELLAN_INCLUDE_DIR = -I. -I/MAGELLAN/.
MAGELLAN_ALLCFLAGS= -O -Wall

fl_statistics: MAGELLAN/main_fl_statistics.c $(MAGELLAN_LIBS)
	$(CC) $(MAGELLAN_ALLCFLAGS) -o $@ $(MAGELLAN_INCLUDE_DIR) $(MAGELLAN_LIBS_DIR) $< $(MAGELLAN_LFLAGS) -lm;

fl_generate: MAGELLAN/main_fl_generate.c  $(MAGELLAN_LIBS)
	$(CC) $(MAGELLAN_ALLCFLAGS) -o $@ $(MAGELLAN_INCLUDE_DIR) $(MAGELLAN_LIBS_DIR) $< $(MAGELLAN_LFLAGS) -lm;

# I don't think I need this
# fl_genchains: MAGELLAN/main_generalizedchains_test.c $(MAGELLAN_LIBS)
# 	$(CC) $(MAGELLAN_ALLCFLAGS) -o $@ $(MAGELLAN_INCLUDE_DIR) $(MAGELLAN_LIBS_DIR) $< $(LFLAGS) -lm #-g
